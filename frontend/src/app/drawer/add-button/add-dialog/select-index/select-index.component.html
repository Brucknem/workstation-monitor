<mat-card>
  <mat-card-header>
    <mat-card-title>Select Devices</mat-card-title>
    <mat-card-subtitle
      >Select the devices for which to display data.</mat-card-subtitle
    >
  </mat-card-header>
  <mat-card-content>
    <ng-container *ngIf="indices">
      <div>
        <mat-form-field appearance="fill">
          <mat-label>Devices</mat-label>
          <mat-select
            #deviceSelect
            (selectionChange)="deviceTypeSelectionChanged.emit($event.value)"
          >
            <mat-option
              *ngFor="let value of indices | keyvalue"
              value="{{ value.key }}"
            >
              {{ value.key }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div *ngIf="deviceSelect.value">
        <mat-form-field appearance="fill">
          <mat-label>{{ deviceSelect.value }}</mat-label>
          <mat-select
            multiple
            (selectionChange)="devicesSelectionChanged.emit($event.value)"
          >
            <mat-option
              *ngFor="let name of indices[deviceSelect.value]"
              [value]="name"
            >
              {{ name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>
  </mat-card-content>
</mat-card>
